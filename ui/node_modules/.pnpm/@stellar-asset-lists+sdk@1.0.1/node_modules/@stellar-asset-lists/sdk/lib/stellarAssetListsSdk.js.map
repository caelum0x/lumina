{"version":3,"file":"stellarAssetListsSdk.js","mappings":"AAAA,IAA2CA,EAAMC,EAAND,EASxCE,WAT8CD,EASlC,I,mBCRf,IAAIE,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,4BCAlF,MAAMI,EAAkB,CACpBC,aAAc,+CACdC,eAAgB,iCA6EpB,SAASC,EAAcC,GACnB,OAAOC,MAAMD,GACRE,MAAKC,IACF,IAAKA,EAAEC,GACH,MAAM,IAAIC,MAAM,oBAAsBF,EAAEG,QAC5C,OAAOH,EAAEI,MAAM,GAE3B,CAEA,SAASC,EAAYC,GACQ,iBAAdA,EAAKC,MAAqB,iFAAiFC,KAAKF,EAAKC,QAC5HD,EAAKC,KAAOd,EAAgBE,eAAiBW,EAAKC,KAE1D,CAEA,SAAgBE,yBArDT,WACH,OAAOb,EAAcH,EAAgBC,cAChCK,MAAKW,IACF,KAAMA,aAAqBC,OACvB,MAAO,CAAC,EACZ,IAAK,MAAMC,KAAQF,EACfL,EAAYO,GAEhB,OAAOF,CAAS,GAE5B,EA2C0CG,eApCnC,SAAwBhB,GAC3B,IAAKA,EACD,MAAM,IAAIiB,UAAU,0BACxB,OAAOlB,EAAcC,GAChBE,MAAKgB,IACF,KAAMA,GAAYC,kBAAkBL,OAChC,MAAO,CAAC,EACZ,IAAK,MAAMM,KAASF,EAAWC,OAC3BX,EAAYY,GAChB,OAAOF,CAAU,GAE7B,EAyB0DG,4BAnBnD,SAAqCC,GACxCnC,OAAOoC,OAAO3B,EAAiB0B,EACnC,G,uBJ5EuB,iBAAZvC,SAA0C,iBAAXyC,OACxCA,OAAOzC,QAAUH,IACQ,mBAAX6C,QAAyBA,OAAOC,IAC9CD,OAAO,GAAI7C,GACe,iBAAZG,QACdA,QAA8B,qBAAIH,IAElCD,EAA2B,qBAAIC","sources":["webpack://stellarAssetListsSdk/webpack/universalModuleDefinition","webpack://stellarAssetListsSdk/webpack/bootstrap","webpack://stellarAssetListsSdk/webpack/runtime/define property getters","webpack://stellarAssetListsSdk/webpack/runtime/hasOwnProperty shorthand","webpack://stellarAssetListsSdk/./index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stellarAssetListsSdk\"] = factory();\n\telse\n\t\troot[\"stellarAssetListsSdk\"] = factory();\n})(globalThis, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const resolverOptions = {\r\n    catalogueUrl: 'https://stellar-asset-lists.github.io/index/',\r\n    ipfsGatewayUrl: 'https://gateway.ipfs.io/ipfs/'\r\n}\r\n\r\n/**\r\n * @typedef {{}} AssetListDescriptor\r\n * @property {string} name - Short descriptive title of the list\r\n * @property {string} provider - Organization or entity that put together the list\r\n * @property {string} description - Text description provided by the organization\r\n * @property {string} icon - URL of the list icon\r\n * @property {string} url - URL of the asset list\r\n */\r\n\r\n/**\r\n * @typedef {{}} AssetList\r\n * @property {string} name - Short descriptive title of the list\r\n * @property {string} provider - Organization or entity that put together the list\r\n * @property {string} description - Text description provided by the organization\r\n * @property {string} version - Current list revision\r\n * @property {string} feedback - URL or Github repository address where users can report bad actors or request addition of new assets\r\n * @property {Asset[]} assets - Assets metadata\r\n */\r\n\r\n/**\r\n * @typedef {{}} Asset\r\n * @property {string} [contract] - Contract address of the asset (for Soroban assets)\r\n * @property {string} [code] - Asset code (for Classic assets)\r\n * @property {string} [issuer] - Asset issuer account address (for Classic assets)\r\n * @property {string} name - Display name\r\n * @property {string} org - Issuer organization/company\r\n * @property {string} domain - FQDN of the site that hosts asset-related stellar.toml\r\n * @property {string} icon - Icon URL\r\n * @property {number} [decimals] - Number of decimals to display\r\n * @property {string} [comment] - Alerts, messages, or other additional information specified by the provider\r\n */\r\n\r\n/**\r\n * Fetch all available assets lists from the catalogue\r\n * @returns {Promise<AssetListDescriptor[]>}\r\n */\r\nexport function fetchAvailableAssetLists() {\r\n    return fetchAndParse(resolverOptions.catalogueUrl)\r\n        .then(catalogue => {\r\n            if (!(catalogue instanceof Array))\r\n                return {}\r\n            for (const list of catalogue) {\r\n                resolveIcon(list)\r\n            }\r\n            return catalogue\r\n        })\r\n}\r\n\r\n/**\r\n * Fetches the assets list from the given URL.\r\n * @param {string} url - The full URL to the assets list.\r\n * @returns {Promise<AssetList>}\r\n */\r\nexport function fetchAssetList(url) {\r\n    if (!url)\r\n        throw new TypeError('Missing asset list URL')\r\n    return fetchAndParse(url)\r\n        .then(assetsList => {\r\n            if (!(assetsList?.assets instanceof Array))\r\n                return {}\r\n            for (const asset of assetsList.assets)\r\n                resolveIcon(asset)\r\n            return assetsList\r\n        })\r\n}\r\n\r\n/**\r\n * Configure resolver options for asset list provider\r\n * @param {{catalogueUrl: string, ipfsGatewayUrl: string}} options\r\n */\r\nexport function setAssetListResolverOptions(options) {\r\n    Object.assign(resolverOptions, options)\r\n}\r\n\r\nfunction fetchAndParse(url) {\r\n    return fetch(url)\r\n        .then(r => {\r\n            if (!r.ok)\r\n                throw new Error('Failed to fetch. ' + r.status)\r\n            return r.json()\r\n        })\r\n}\r\n\r\nfunction resolveIcon(item) {\r\n    if (typeof item.icon === 'string' && /^(b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})$/.test(item.icon)) {\r\n        item.icon = resolverOptions.ipfsGatewayUrl + item.icon\r\n    }\r\n}\r\n\r\nexport default {fetchAvailableAssetLists, fetchAssetList, setAssetListResolverOptions}"],"names":["root","factory","globalThis","__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","resolverOptions","catalogueUrl","ipfsGatewayUrl","fetchAndParse","url","fetch","then","r","ok","Error","status","json","resolveIcon","item","icon","test","fetchAvailableAssetLists","catalogue","Array","list","fetchAssetList","TypeError","assetsList","assets","asset","setAssetListResolverOptions","options","assign","module","define","amd"],"sourceRoot":""}